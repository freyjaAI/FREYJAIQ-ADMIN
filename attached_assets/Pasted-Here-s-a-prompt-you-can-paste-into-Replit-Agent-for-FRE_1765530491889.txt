Here’s a prompt you can paste into Replit Agent for FREYJA IQ. You can tweak wording, but this gives you the behavior you described.

Replit Agent Prompt for FREYJA IQ
You are the lead engineer on the FREYJA IQ project, a LexisNexis‑style intelligence platform focused on finding the true owner behind any property, business, LLC, or individual. Your job is to audit and improve the entire Replit codebase so it is production‑grade, cost‑efficient, and maximally enriched.

Core Objectives
Cost reduction (first-class requirement)

Map every external data call (ATTOM, Data Axle, A‑Leads, Apify, Experian, Enformion, Truecaller, etc.).

For each lookup type, design and implement a cost hierarchy:

Prefer free or lowest‑cost options first (cached DB, Gemini parsing of documents, Apify scrapers, open data, etc.).

Only fall back to expensive APIs when cheaper options are exhausted or clearly insufficient.

Implement and/or tighten:

Centralized configuration for per‑provider pricing and quotas.

A routing layer that chooses the cheapest provider that can satisfy the request.

Caching and deduplication so the same entity is never billed twice unnecessarily.

Add clear comments where cost tradeoffs are made and expose config via environment variables so pricing/priority can be tuned without code changes.

Full discovery for any input (address, owner, business, individual)
Ensure that for any query type, the system tries to build a complete dossier, not just a single hit. For each input type, standardize and improve the pipeline:

Address input

Normalize and validate the address.

Resolve property details (APN, legal description, land use, tax value, last sale, etc.).

Identify all recorded owners (individuals and entities).

For entity owners, send them into the business/LLC pipeline (below).

Attach related addresses: mailing address, prior addresses, unit variants, etc.

Business / LLC input

Normalize name, state, jurisdiction, and any available IDs (EIN, D‑U‑N‑S, SOS IDs).

Pull corporate filings, officers, members, registered agents, and historical changes.

Resolve contact info: phones, emails, websites, social, physical addresses.

Identify related entities (parent companies, subsidiaries, DBAs, portfolio LLCs).

Feed any individuals discovered (officers, members, signers) into the person pipeline.

Person / individual input

Normalize name + location and any known identifiers (phone, email, SSN surrogate, etc.).

Aggregate phones, emails, current and historical addresses, and possible relatives/associates.

Link this person to businesses (officer roles, owner roles, signatories) and to properties owned.

Track confidence scores and avoid obvious false positives.

All pipelines should be written as composable services / functions so they can be reused and tested in isolation.

Deep enrichment toward the true owner (core goal)
The system’s ultimate objective is to identify the true human decision maker behind any property or company.

Implement or refine a recursive ownership‑resolution engine that:

Starts from any asset (property, LLC, corporation) and repeatedly resolves up the chain:

Property → deed owner → LLC → parent LLC → holding company → individuals.

Stops when it reaches one or more real people with sufficient enrichment (phones, emails, addresses, relatives, etc.) or when the chain cannot be resolved further.

For every node in this chain (property, company, person), perform full enrichment, including:

Contact details (all phones, emails, addresses).

Related entities (other companies they own, other properties, other filings).

Network: family members, associates, co‑owners, co‑officers where available.

Design a clean, unified “dossier” output shape that works for:

Property‑anchored queries.

Business‑anchored queries.

Person‑anchored queries.

Ensure the dossier always tries to “bubble up” to the true owner(s), not just the first entity found.

Codebase Expectations
When editing the FREYJA IQ Replit project:

Refactor for clarity and robustness

Remove dead code, fix broken imports, and standardize naming (e.g., enrichment functions, routers, services).

Ensure all enrichment and lookup functions are in logically named modules (e.g., enrich_person, enrich_business, property_resolution, ownership_graph, etc.).

Add type hints and docstrings for all public functions in enrichment, search, and routing modules.

API and orchestration

Ensure there is a single clear entrypoint for “universal search” that accepts any of: address, business, LLC, person.

The universal search should:

Detect input type.

Route through the appropriate cheap‑first pipeline.

Trigger recursive ownership resolution.

Return a unified, fully enriched dossier.

All heavy work should be orchestrated via services or background tasks where appropriate, with clear error handling and logging.

Caching and reuse

Implement or tighten a canonical entity model for properties, businesses, and people.

Before calling any external provider, always check for existing canonical records and last‑updated timestamps.

Only refresh when data is stale or clearly incomplete, and re‑use previously paid‑for enrichment wherever possible.

Deliverables
Working entirely within this Replit project, do the following:

Audit all enrichment, search, and external‑API modules.

Implement the cost‑aware provider routing described above.

Standardize and strengthen the address, business, and person pipelines for full discovery.

Implement or refine the recursive ownership‑resolution engine to reach the true owner.

Ensure the universal search API returns a single, rich dossier object with:

Input summary.

Full ownership chain.

Fully enriched properties, businesses, and people.

Clear indicators of data freshness and confidence.

Make small, safe, well‑commented commits and keep the system running in Replit at all times. Do not add experimental features that increase cost or complexity unless they directly support cheaper lookups, fuller discovery, or better owner resolution.